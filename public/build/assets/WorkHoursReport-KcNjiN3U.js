import{r as o,j as e,S as I,A as b}from"./app-CzXvZeOf.js";import{A as $}from"./AuthenticatedLayout-BYREx6e3.js";import"./ApplicationLogo-DsF7_DBp.js";import"./transition-BaGnaKh-.js";function F({message:a,onClose:s}){return a?e.jsxs("div",{className:"fixed top-5 right-5 z-50 bg-green-600 text-white px-4 py-2 rounded shadow-lg flex items-center",children:[e.jsx("span",{children:a}),e.jsx("button",{onClick:s,className:"ml-4 text-white font-bold",children:"Ã—"})]}):null}const O=a=>{const s=new Date;let l,r;if(a==="today")l=r=s.toISOString().slice(0,10);else if(a==="week"){const h=s.getDate()-s.getDay();l=new Date(s.setDate(h)).toISOString().slice(0,10),r=new Date().toISOString().slice(0,10)}else a==="month"&&(l=new Date(s.getFullYear(),s.getMonth(),1).toISOString().slice(0,10),r=new Date().toISOString().slice(0,10));return{start:l,end:r}};function L({auth:a,workHours:s,users:l=[],flash:r,filter:h="all",startDate:U="",endDate:z="",workType:w="all",userId:f="all"}){const[m,g]=o.useState(null),[N,u]=o.useState((r==null?void 0:r.success)||""),[n,k]=o.useState(h),[i,v]=o.useState(w),[j,D]=o.useState(f),S=()=>{m&&b.delete(route("work-hours.destroy",m),{onSuccess:()=>{u("Entry deleted successfully."),g(null)},onError:()=>{u("Failed to delete entry."),g(null)}})},C=()=>u(""),T=t=>{D(t),c(n,i,t)},c=(t,d=i,y=j)=>{k(t);const x={filter:t};if(t!=="all"){const{start:A,end:W}=O(t);x.startDate=A,x.endDate=W}d&&d!=="all"&&(x.workType=d),y&&y!=="all"&&(x.userId=y),b.get(route("work-hours.report"),x)},p=t=>{v(t),c(n,t)};return e.jsxs($,{user:a.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Work Hours Report"}),children:[e.jsx(I,{title:"Work Hours"}),e.jsx(F,{message:N,onClose:C}),m&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Confirm Delete"}),e.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this entry?"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded",children:"Delete"})]})]})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Work Hours Report"})}),e.jsxs("div",{className:"mb-4 flex gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded ${n==="all"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"All Dates"}),e.jsx("button",{onClick:()=>c("today"),className:`px-3 py-1 rounded ${n==="today"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"Today"}),e.jsx("button",{onClick:()=>c("week"),className:`px-3 py-1 rounded ${n==="week"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"This Week"}),e.jsx("button",{onClick:()=>c("month"),className:`px-3 py-1 rounded ${n==="month"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"This Month"})]}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded ${i==="all"?"bg-green-600 text-white":"bg-gray-200"}`,children:"All Types"}),e.jsx("button",{onClick:()=>p("tracker"),className:`px-3 py-1 rounded ${i==="tracker"?"bg-green-600 text-white":"bg-gray-200"}`,children:"Tracker"}),e.jsx("button",{onClick:()=>p("fixed"),className:`px-3 py-1 rounded ${i==="fixed"?"bg-green-600 text-white":"bg-gray-200"}`,children:"Fixed"}),e.jsx("button",{onClick:()=>p("manual"),className:`px-3 py-1 rounded ${i==="manual"?"bg-green-600 text-white":"bg-gray-200"}`,children:"Manual"})]}),e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsxs("select",{value:j,onChange:t=>T(t.target.value),className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"all",children:"All Users"}),l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Work Type"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tracker"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.user.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:t.work_type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:t.tracker}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.project}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.client}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.hours}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.description})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:6}),e.jsxs("td",{className:"px-6 py-4 font-bold text-right text-gray-900",children:["Total: ",s.reduce((t,d)=>t+Number(d.hours||0),0).toFixed(2)]}),e.jsx("td",{colSpan:2})]})})]})]})})})})]})}export{L as default};
