import{r as x,j as e,S as Z,x as H,A as k}from"./app-CZCp2aUd.js";import{D as L,t as P,u as v,w as ee}from"./helpers-DYhm9lPP.js";import{A as te}from"./AuthenticatedLayout-BEv8pIN4.js";import"./index-6JA3zvoH.js";import"./ApplicationLogo-BkownQm0.js";import"./transition-DZQUnqdu.js";function re({message:s,type:l="success",onClose:r}){if(!s)return null;const d=l==="error"?"bg-gradient-to-r from-red-600 to-red-700":"bg-gradient-to-r from-green-600 to-green-700",h=l==="error"?"border-red-400":"border-yellow-400";return e.jsxs("div",{className:`fixed top-5 right-5 z-50 ${d} text-white px-6 py-3 rounded-lg shadow-lg flex items-center border-l-4 ${h}`,children:[e.jsx("span",{className:"font-medium",children:s}),e.jsx("button",{onClick:r,className:"ml-4 text-white hover:text-yellow-200 font-bold text-lg",children:"Ã—"})]})}const oe=s=>{const l=new Date;let r,d;if(s==="today")r=d=l.toISOString().slice(0,10);else if(s==="week"){const h=l.getDate()-l.getDay();r=new Date(l.setDate(h)).toISOString().slice(0,10),d=new Date().toISOString().slice(0,10)}else s==="month"&&(r=new Date(l.getFullYear(),l.getMonth(),1).toISOString().slice(0,10),d=new Date().toISOString().slice(0,10));return{start:r,end:d}};function ce({auth:s,workHours:l,flash:r,filter:d="all",startDate:h="",endDate:D="",workType:V="all"}){var T,_;const[N,j]=x.useState(null),[z,w]=x.useState((r==null?void 0:r.success)||(r==null?void 0:r.error)||""),[R,C]=x.useState(r!=null&&r.success?"success":"error"),[m,U]=x.useState(d),[c,B]=x.useState(V),[b,Y]=x.useState(h?new Date(h):null),[y,q]=x.useState(D?new Date(D):null),S=t=>({tracker:"Tracker",manual:"Manual Time",test_task:"Test Task",fixed:"Fixed Project",office_work:"Office Work",outside_of_upwork:"Outside of Upwork"})[t]||t,G=t=>{if(!t&&t!==0)return"";const o=Math.round(Number(t)*3600),i=Math.floor(o/3600),n=Math.floor(o%3600/60),a=o%60;return[i,n,a].map(p=>String(p).padStart(2,"0")).join(":")},J=()=>{const t=l.map(n=>{var a,p,f;return{ID:n.id,"Work Type":S(n.work_type),Tracker:n.tracker,Date:n.date,Project:(a=n.project)==null?void 0:a.name,Client:(f=(p=n.project)==null?void 0:p.client)==null?void 0:f.name,Hours:G(n.hours),Description:n.description}}),o=v.json_to_sheet(t),i=v.book_new();v.book_append_sheet(i,o,"WorkHours"),ee(i,"work_hours_list.csv",{bookType:"csv"})};x.useEffect(()=>{r!=null&&r.success?(w(r.success),C("success")):r!=null&&r.error&&(w(r.error),C("error"))},[r==null?void 0:r.success,r==null?void 0:r.error]);const K=t=>{j(t)},Q=()=>{N&&k.delete(route("work-hours.destroy",N),{onSuccess:()=>{w("Entry deleted successfully."),j(null)},onError:()=>{w("Failed to delete entry."),j(null)}})},X=()=>w(""),g=(t,o=c)=>{if(U(t),t==="all"&&(o==="all"||!o))k.get(route("work-hours.index"));else if(t==="custom"){if(b&&y){const i={filter:"custom",startDate:b.toISOString().slice(0,10),endDate:y.toISOString().slice(0,10)};o&&o!=="all"&&(i.workType=o),k.get(route("work-hours.index"),i)}}else{const{start:i,end:n}=oe(t),a={filter:t};t!=="all"&&(a.startDate=i,a.endDate=n),o&&o!=="all"&&(a.workType=o),k.get(route("work-hours.index"),a)}},u=t=>{B(t),g(m,t)};return e.jsxs(te,{user:s.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Work Hours"}),children:[e.jsx(Z,{title:"Work Hours"}),e.jsx(re,{message:z,type:R,onClose:X}),N&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md border-t-4 border-yellow-400",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Confirm Delete"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Are you sure you want to delete this entry?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j(null),className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Q,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-medium transition-all",children:"Delete"})]})]})}),e.jsx("div",{className:"py-12 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-xl border-t-4 border-gradient-to-r from-green-600 to-yellow-400",children:e.jsxs("div",{className:"p-8 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-green-700 bg-clip-text text-transparent",children:"Work Hours"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and track your work hours efficiently"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs(H,{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-medium transition-all shadow-lg hover:shadow-xl",href:route("work-hours.create"),children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Entry"]}),e.jsxs("button",{onClick:J,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg font-medium transition-all shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to CSV"]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-yellow-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-3",children:"Filter by Date Range"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="all"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"All Dates"}),e.jsx("button",{onClick:()=>g("today"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="today"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"Today"}),e.jsx("button",{onClick:()=>g("week"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="week"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"This Week"}),e.jsx("button",{onClick:()=>g("month"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="month"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"This Month"}),e.jsx("button",{onClick:()=>g("custom"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="custom"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"Custom Range"})]}),m==="custom"&&e.jsxs("div",{className:"flex gap-3 items-center mt-4 p-3 bg-white rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"From:"}),e.jsx(L,{selected:b,onChange:t=>Y(t),dateFormat:"yyyy-MM-dd",maxDate:y||void 0,className:"px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("span",{className:"text-green-700 font-medium",children:"To:"}),e.jsx(L,{selected:y,onChange:t=>q(t),dateFormat:"yyyy-MM-dd",minDate:b||void 0,className:"px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("button",{onClick:()=>g("custom"),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-medium hover:from-green-700 hover:to-green-800 transition-all disabled:opacity-50",disabled:!b||!y,children:"Apply"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-800 mb-3",children:"Filter by Work Type"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="all"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"All Types"}),e.jsx("button",{onClick:()=>u("tracker"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="tracker"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Tracker"}),e.jsx("button",{onClick:()=>u("manual"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="manual"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Manual Time"}),e.jsx("button",{onClick:()=>u("test_task"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="test_task"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Test Task"}),e.jsx("button",{onClick:()=>u("fixed"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="fixed"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Fixed Project"}),e.jsx("button",{onClick:()=>u("office_work"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="office_work"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Office Work"}),e.jsx("button",{onClick:()=>u("outside_of_upwork"),className:`px-4 py-2 rounded-lg font-medium transition-all ${c==="outside_of_upwork"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Outside of Upwork"})]})]})]}),e.jsx("div",{className:"overflow-x-auto shadow-xl ring-1 ring-black ring-opacity-5 rounded-xl",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-green-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"ID"}),((T=s.user)==null?void 0:T.role)==="admin"&&e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Work Type"}),e.jsx("th",{className:"w-24 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Tracker"}),e.jsx("th",{className:"w-28 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"w-36 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Client"}),e.jsx("th",{className:"w-20 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Hours"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider sticky right-0 bg-gradient-to-r from-green-600 to-green-700",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((t,o)=>{var i,n,a,p,f,W,M,$,A,O,I,E,F;return e.jsxs("tr",{className:`${o%2===0?"bg-white":"bg-gray-50"} hover:bg-green-50 transition-colors`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-800",children:t.id}),((i=s.user)==null?void 0:i.role)==="admin"&&e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate font-medium",title:(n=t.user)==null?void 0:n.name,children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:(a=t.user)==null?void 0:a.name})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:S(t.work_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 capitalize truncate font-medium",children:t.tracker}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate font-medium",title:(p=t.project)==null?void 0:p.name,children:(f=t.project)==null?void 0:f.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 truncate",title:(M=(W=t.project)==null?void 0:W.client)==null?void 0:M.name,children:(A=($=t.project)==null?void 0:$.client)==null?void 0:A.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-700",children:P(t.hours)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 max-w-xs truncate",title:t.description,children:t.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 sticky right-0 bg-white",children:e.jsxs("div",{className:"flex space-x-2",children:[(((O=s.user)==null?void 0:O.role)==="admin"||t.user_id===((I=s.user)==null?void 0:I.id))&&e.jsxs(e.Fragment,{children:[e.jsx(H,{href:route("work-hours.edit",t.id),className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-xs font-medium rounded-md transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>K(t.id),className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white text-xs font-medium rounded-md transition-all",children:"Delete"})]}),((E=s.user)==null?void 0:E.role)==="employee"&&t.user_id!==((F=s.user)==null?void 0:F.id)&&e.jsx("span",{className:"text-xs text-gray-500 italic",children:"View Only"})]})})]},t.id)})}),e.jsx("tfoot",{className:"bg-gradient-to-r from-gray-50 to-green-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:((_=s.user)==null?void 0:_.role)==="admin"?7:6,className:"px-6 py-4"}),e.jsxs("td",{className:"px-6 py-4 font-bold text-right text-green-800 text-lg",children:["Total: ",P(l.reduce((t,o)=>t+Number(o.hours||0),0).toFixed(2))]}),e.jsx("td",{className:"px-6 py-4"}),e.jsx("td",{className:"w-32 px-6 py-4 sticky right-0 bg-gradient-to-r from-gray-50 to-green-50"})]})})]})})]})})})})]})}export{ce as default};
