import{G as V,R as i,j as t,S as H,x as G}from"./app-BVG6et_P.js";import{A as J}from"./AuthenticatedLayout-CKlkTecE.js";import{A as K}from"./AnimatedBackground-DogZR0Zy.js";import"./ApplicationLogo-CShaN4sh.js";import"./Avatar-BfjUHkWe.js";import"./transition-DBFTC2lo.js";function re({auth:C,workHour:l,trackers:f=[],clients:p=[]}){const y=Math.round(l.hours*60),D=Math.floor(y/60),_=y%60,r=V({date:l.date,hours:D.toString(),minutes:_.toString(),description:l.description||"",work_type:l.work_type||"tracker",client_id:l.client_id||"",tracker:l.tracker||"",trackerSearch:"",clientSearch:""}),[T,c]=i.useState(!1),[E,u]=i.useState(!1),[b,n]=i.useState(""),[w,o]=i.useState(""),g=i.useRef(null),k=i.useRef(null),v=i.useRef(null),N=i.useRef(null);i.useEffect(()=>{function e(a){g.current&&v.current&&!g.current.contains(a.target)&&!v.current.contains(a.target)&&c(!1),k.current&&N.current&&!k.current.contains(a.target)&&!N.current.contains(a.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const d=()=>{const e=Number(r.data.hours)||0,a=Number(r.data.minutes)||0;return e>0||a>0},j=e=>{if(!m())return n(""),!0;if(!e||e.trim()==="")return n("Please select a client from the dropdown"),!1;const a=p.find(s=>s.name===e);return a?(r.data.client_id!=a.id&&r.setData("client_id",a.id),n(""),!0):(n("Please select a valid client from the dropdown"),!1)},S=e=>{if(!h())return o(""),!0;if(!e||e.trim()==="")return o("Please select a profile from the dropdown"),!1;const a=f.find(s=>s===e);return a?(r.data.tracker!==a&&r.setData("tracker",a),o(""),!0):(o("Please select a valid profile from the dropdown"),!1)},L=e=>{e.preventDefault();const a=Number(r.data.hours)||0,s=Number(r.data.minutes)||0;if(a===0&&s===0){alert("Please enter at least some time (hours or minutes).");return}const x=j(r.data.clientSearch),I=S(r.data.trackerSearch||r.data.tracker);if(!x||!I)return;const A=a+s/60,U=Math.round(A*100)/100;r.put(route("work-hours.update",l.id),{...r.data,hours:U})},M=[{label:"Tracker",value:"tracker"},{label:"Manual Time",value:"manual"},{label:"Fixed Client",value:"fixed"},{label:"Outside of Upwork",value:"outside_of_upwork"},{label:"Office Work",value:"office_work"},{label:"Test Task",value:"test_task"}],F=()=>{c(!0),u(!1)},R=()=>{u(!0),c(!1)},W=e=>{const a={...r.data,work_type:e};["tracker","manual","fixed"].includes(e)||(a.tracker="",a.trackerSearch="",o("")),["tracker","manual","fixed","outside_of_upwork"].includes(e)||(a.client_id="",a.clientSearch="",n("")),r.setData(a)},h=()=>["tracker","manual","fixed"].includes(r.data.work_type),m=()=>["tracker","manual","fixed","outside_of_upwork"].includes(r.data.work_type),P=e=>{const a=e.target.value;r.setData("clientSearch",a);const s=p.find(x=>x.name===a);s?r.setData("client_id",s.id):r.setData("client_id",""),b&&n(""),u(!0)},B=e=>{const a=e.target.value;r.setData("trackerSearch",a);const s=f.find(x=>x===a);s?r.setData("tracker",s):r.setData("tracker",""),w&&o(""),c(!0)},$=e=>{r.setData("client_id",e.id),r.setData("clientSearch",e.name),n(""),u(!1),setTimeout(()=>{j(e.name)},50)},q=e=>{r.setData("tracker",e),r.setData("trackerSearch",e),o(""),c(!1),setTimeout(()=>{S(e)},50)},O=()=>{setTimeout(()=>{u(!1),m()&&j(r.data.clientSearch)},300)},z=()=>{setTimeout(()=>{c(!1),h()&&S(r.data.trackerSearch||r.data.tracker)},300)};return i.useEffect(()=>{l.client&&r.data.clientSearch===""&&r.setData(e=>({...e,clientSearch:l.client.name})),l.tracker&&r.data.trackerSearch===""&&r.setData(e=>({...e,trackerSearch:l.tracker}))},[l]),t.jsxs(J,{user:C.user,header:t.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Edit Work Entry"}),children:[t.jsx(H,{title:"Edit Work Entry"}),t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:t.jsx(K,{})}),t.jsx("div",{className:"py-12 min-h-screen relative z-10",children:t.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:t.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-visible shadow-2xl rounded-2xl border border-white/10",children:t.jsxs("div",{className:"p-8 text-white relative",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Edit Work Entry"}),t.jsx("p",{className:"text-white/70 text-lg",children:"Update your work hours and track your progress"})]}),t.jsxs("form",{onSubmit:L,children:[t.jsxs("div",{className:"mb-6 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Work Type"}),t.jsxs("p",{className:"text-sm text-white/70 mb-4",children:["Required fields for selected type: "," ",r.data.work_type==="tracker"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="manual"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="fixed"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="outside_of_upwork"&&"Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="office_work"&&"Description, Hours/Minutes, Tracking Date",r.data.work_type==="test_task"&&"Description, Hours/Minutes, Tracking Date"]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:M.map(e=>t.jsx("button",{type:"button",onClick:()=>W(e.value),className:`p-3 rounded-xl font-medium transition-all text-sm ${r.data.work_type===e.value?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:e.label},e.value))})]}),t.jsxs("div",{className:`grid gap-6 mb-6 ${h()&&m()?"md:grid-cols-2":(m()||h(),"md:grid-cols-1")}`,children:[h()&&t.jsxs("div",{className:"relative",children:[t.jsxs("label",{htmlFor:"tracker",className:"block text-sm font-medium text-white mb-2",children:["Profile Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{ref:g,type:"text",placeholder:"Search or select profile...",className:`w-full px-4 py-3 bg-white/10 backdrop-blur-xl border rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50 ${w?"border-red-400":"border-white/20"}`,value:r.data.trackerSearch||(r.data.tracker?r.data.tracker:""),onChange:B,onFocus:F,onBlur:z,required:h()}),w&&t.jsx("div",{className:"mt-1 text-sm text-red-300",children:w}),T&&t.jsx("div",{ref:v,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:t.jsxs("div",{className:"p-2",children:[f.filter(e=>!r.data.trackerSearch||e.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).map((e,a)=>t.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onMouseDown:s=>s.preventDefault(),onClick:()=>q(e),children:e},a)),f.filter(e=>!r.data.trackerSearch||e.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).length===0&&r.data.trackerSearch&&t.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No profiles found. Please select from available options."})]})})]}),m()&&t.jsxs("div",{className:"relative",children:[t.jsxs("label",{htmlFor:"client",className:"block text-sm font-medium text-white mb-2",children:["Client Name ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{ref:k,type:"text",placeholder:"Search or select client...",className:`w-full px-4 py-3 bg-white/10 backdrop-blur-xl border rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50 ${b?"border-red-400":"border-white/20"}`,value:r.data.clientSearch,onChange:P,onFocus:R,onBlur:O,required:m()}),b&&t.jsx("div",{className:"mt-1 text-sm text-red-300",children:b}),E&&t.jsx("div",{ref:N,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:t.jsxs("div",{className:"p-2",children:[p.filter(e=>{const a=e.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).map(e=>t.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onMouseDown:a=>a.preventDefault(),onClick:()=>$(e),children:e.name},e.id)),p.filter(e=>{const a=e.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).length===0&&r.data.clientSearch&&t.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No clients found. Please select from available options."})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-white mb-2",children:["Date ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"date",id:"date",value:r.data.date,onChange:e=>r.setData("date",e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"hours",className:"block text-sm font-medium text-white mb-2",children:["Hours ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("input",{type:"number",id:"hours",min:"0",max:"24",step:"1",value:r.data.hours,onChange:e=>{let a=parseInt(e.target.value);(isNaN(a)||a<0)&&(a=0),a>24&&(a=24),r.setData("hours",a.toString())},onWheel:e=>e.target.blur(),onFocus:e=>e.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter hours (0-24)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"minutes",className:"block text-sm font-medium text-white mb-2",children:"Minutes"}),t.jsx("input",{type:"number",id:"minutes",min:"0",max:"59",step:"1",value:r.data.minutes,onChange:e=>{let a=parseInt(e.target.value);(isNaN(a)||a<0)&&(a=0),a>59&&(a=59),r.setData("minutes",a.toString())},onWheel:e=>e.target.blur(),onFocus:e=>e.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:e=>e.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter minutes (0-59)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50"})]})]}),t.jsx("div",{className:`mb-6 p-4 backdrop-blur-xl rounded-xl border ${d()?"bg-gradient-to-r from-green-500/20 to-blue-500/20 border-white/20":"bg-gradient-to-r from-red-500/20 to-orange-500/20 border-red-400/30"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("svg",{className:`w-6 h-6 ${d()?"text-blue-400":"text-red-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("div",{className:"text-white",children:[t.jsxs("div",{className:`text-sm font-medium ${d()?"text-white/70":"text-red-300"}`,children:["Total Time ",!d()&&"(Required)"]}),t.jsx("div",{className:`text-2xl font-bold ${d()?"":"text-red-300"}`,children:(()=>{const e=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return e===0&&a===0?"No time entered":`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})()}),d()&&t.jsx("div",{className:"text-xs text-white/60",children:(()=>{const e=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return`${(e+a/60).toFixed(2)} decimal hours`})()}),!d()&&t.jsx("div",{className:"text-xs text-red-300",children:"Please enter at least some hours or minutes"})]})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:["Description ",t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsx("textarea",{id:"description",rows:4,value:r.data.description,onChange:e=>r.setData("description",e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",placeholder:"Describe the work you did...",required:!0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(G,{href:route("work-hours.index"),className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all border border-white/20",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Cancel"]}),t.jsx("button",{type:"submit",disabled:r.processing,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50",children:r.processing?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Entry"]})})]})]})]})})})})]})}export{re as default};
