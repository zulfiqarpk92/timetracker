import{G as _,R as l,j as e,S as $,x as P}from"./app-BEiyfP8R.js";import{r as j}from"./index-rFTAvxdi.js";import{A as T}from"./AuthenticatedLayout-C4U6M09G.js";import{A as E}from"./AnimatedBackground-DFheTkG4.js";import"./ApplicationLogo-DFDrIvvZ.js";import"./Avatar-C2NWYuYW.js";import"./transition-BdhIlK1f.js";function O({auth:v,workHour:a,trackers:g=[],projects:m=[]}){const r=_({id:a.id,date:a.date||"",hours:a.hours?Math.floor(Number(a.hours)):"",minutes:a.hours?Math.round(Number(a.hours)%1*60):"0",description:a.description||"",work_type:a.work_type||"tracker",project_id:a.project_id||"",tracker:a.tracker||"",trackerSearch:"",projectSearch:""}),[d,i]=l.useState(!1),[c,n]=l.useState(!1),[p,N]=l.useState({top:0,left:0,width:0}),[b,k]=l.useState({top:0,left:0,width:0}),f=l.useRef(null),w=l.useRef(null),y=t=>{t.preventDefault();const o=Number(r.data.hours)+Number(r.data.minutes)/60;r.put(route("work-hours.update",{id:r.data.id,hours:o}))},S=[{label:"Tracker",value:"tracker"},{label:"Manual Time",value:"manual"},{label:"Test Task",value:"test_task"},{label:"Fixed Project",value:"fixed"},{label:"Office Work",value:"office_work"},{label:"Outside of Upwork",value:"outside_of_upwork"}],u=()=>{if(f.current){const t=f.current.getBoundingClientRect();N({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}},h=()=>{if(w.current){const t=w.current.getBoundingClientRect();k({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}},C=()=>{u(),i(!0),n(!1)},D=()=>{h(),n(!0),i(!1)};return l.useEffect(()=>{const t=()=>{d&&u(),c&&h()},o=()=>{d&&u(),c&&h()};return window.addEventListener("resize",t),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",t),window.removeEventListener("scroll",o)}},[d,c]),e.jsxs(T,{user:v.user,header:e.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Edit Work Entry"}),children:[e.jsx($,{title:"Edit Work Hour Entry"}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:e.jsx(E,{})}),e.jsx("div",{className:"py-12 min-h-screen relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-hidden shadow-2xl rounded-2xl border border-white/10",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Edit Work Entry"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Update your time entry details"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 backdrop-blur-xl p-6 rounded-xl border border-white/20",children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-4",children:"Work Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(t=>e.jsx("button",{type:"button",onClick:()=>r.setData("work_type",t.value),className:`px-4 py-3 rounded-xl font-medium transition-all text-sm ${r.data.work_type===t.value?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/10 text-white border border-white/20 hover:bg-white/20 backdrop-blur-xl"}`,children:t.label},t.value))}),r.errors.work_type&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:r.errors.work_type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[!["office_work","outside_of_upwork"].includes(r.data.work_type)&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Profile Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:f,type:"text",placeholder:"Search or select profile...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white placeholder-white/50",value:r.data.trackerSearch||r.data.tracker||"",onChange:t=>{const o=t.target.value;r.setData("trackerSearch",o),o===""&&r.setData("tracker",""),u(),i(!0)},onFocus:C,onBlur:()=>setTimeout(()=>i(!1),150)}),d&&j.createPortal(e.jsxs("div",{className:"fixed z-[9999] bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl mt-1 max-h-40 overflow-y-auto shadow-2xl",style:{top:`${p.top}px`,left:`${p.left}px`,width:`${p.width}px`},children:[g.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).map(t=>e.jsx("div",{className:"px-4 py-2 cursor-pointer hover:bg-white/20 text-white transition-colors",onMouseDown:()=>{r.setData("tracker",t),r.setData("trackerSearch",t),i(!1)},children:t},t)),g.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).length===0&&e.jsx("div",{className:"px-4 py-2 text-white/60",children:"No profiles found"})]}),document.body),r.errors.tracker&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:r.errors.tracker})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Tracking Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",value:r.data.date,onChange:t=>r.setData("date",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white",required:!0}),r.errors.date&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:r.errors.date})]}),e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Project Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:w,type:"text",placeholder:"Search or select project...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white placeholder-white/50",value:r.data.projectSearch||(r.data.project_id?(()=>{var x;const t=m.find(L=>L.id==r.data.project_id);if(!t)return"";const o=((x=t.client)==null?void 0:x.name)||"No Client",s=t.name||"";return`${o}${s?" -- "+s:""}`})():""),onChange:t=>{const o=t.target.value;r.setData("projectSearch",o),o===""&&r.setData("project_id",""),h(),n(!0)},onFocus:D,onBlur:()=>setTimeout(()=>n(!1),150),required:!0}),c&&j.createPortal(e.jsxs("div",{className:"fixed z-[9999] bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl mt-1 max-h-40 overflow-y-auto shadow-2xl",style:{top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`},children:[m.filter(t=>{var s;const o=`${((s=t.client)==null?void 0:s.name)??"No Client"} -- ${t.name}`;return!r.data.projectSearch||o.toLowerCase().includes(r.data.projectSearch.toLowerCase())}).map(t=>{var o;return e.jsxs("div",{className:"px-4 py-2 cursor-pointer hover:bg-white/20 text-white transition-colors",onMouseDown:()=>{var s;r.setData("project_id",t.id),r.setData("projectSearch",`${((s=t.client)==null?void 0:s.name)??"No Client"} -- ${t.name}`),n(!1)},children:[((o=t.client)==null?void 0:o.name)??"No Client"," -- ",t.name]},t.id)}),m.filter(t=>{var s;const o=`${((s=t.client)==null?void 0:s.name)??"No Client"} -- ${t.name}`;return!r.data.projectSearch||o.toLowerCase().includes(r.data.projectSearch.toLowerCase())}).length===0&&e.jsx("div",{className:"px-4 py-2 text-white/60",children:"No projects found"})]}),document.body),r.errors.project&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:r.errors.project})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Hours ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",min:"0",max:"24",placeholder:"0",value:r.data.hours||"",onChange:t=>{let o=t.target.value,s=parseInt(o.replace(/[^0-9]/g,""));isNaN(s)?s="":s>24?s=24:s<0&&(s=0),r.setData("hours",s===""?"":s.toString())},className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white placeholder-white/50",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Minutes ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",min:"0",max:"59",placeholder:"0",value:r.data.minutes||"",onChange:t=>{let o=t.target.value,s=parseInt(o.replace(/[^0-9]/g,""));isNaN(s)?s="":s>59?s=59:s<0&&(s=0),r.setData("minutes",s===""?"":s.toString())},className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white placeholder-white/50",required:!0})]}),e.jsx("div",{className:"md:col-span-2 p-6 bg-gradient-to-r from-green-500/20 to-blue-500/20 backdrop-blur-xl rounded-xl border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Total Time: ",(()=>{const t=parseInt(r.data.hours||0,10),o=parseInt(r.data.minutes||0,10),s=x=>x.toString().padStart(2,"0");return isNaN(t)&&isNaN(o)?"00:00":isNaN(t)?`00:${s(o)}`:isNaN(o)?`${s(t)}:00`:`${s(t)}:${s(o)}`})()]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Description ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{placeholder:"Add any notes about this time entry...",value:r.data.description,onChange:t=>r.setData("description",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all min-h-[120px] text-white placeholder-white/50",required:!0}),r.errors.description&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:r.errors.description})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsxs("button",{type:"submit",disabled:r.processing,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50 backdrop-blur-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.processing?"Updating...":"Update Entry"]}),e.jsxs("button",{type:"button",onClick:()=>r.reset(),className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all border border-white/20 backdrop-blur-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Changes"]}),e.jsxs(P,{href:route("work-hours.index"),className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to List"]})]})]})]})})})})]})}export{O as default};
