import{G as S,R as l,j as e,S as _,x as L}from"./app-BDFrpCJn.js";import{A as T}from"./AuthenticatedLayout-Db4IgUFQ.js";import{A as F}from"./AnimatedBackground-DEN2uelM.js";import"./ApplicationLogo-CUacKlLn.js";import"./Avatar-cq-qIr6m.js";import"./transition-CUJMOplf.js";function q({auth:f,trackers:b=[],clients:d=[]}){const a=S({date:new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Karachi"}),hours:"0",minutes:"0",description:"",work_type:"tracker",client_id:"",tracker:"",trackerSearch:"",clientSearch:""}),[w,i]=l.useState(!1),[g,o]=l.useState(!1),h=l.useRef(null),m=l.useRef(null),x=l.useRef(null),p=l.useRef(null);l.useEffect(()=>{function t(r){h.current&&x.current&&!h.current.contains(r.target)&&!x.current.contains(r.target)&&i(!1),m.current&&p.current&&!m.current.contains(r.target)&&!p.current.contains(r.target)&&o(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const s=()=>{const t=Number(a.data.hours)||0,r=Number(a.data.minutes)||0;return t>0||r>0},k=t=>{t.preventDefault();const r=Number(a.data.hours)||0,n=Number(a.data.minutes)||0;if(r===0&&n===0){alert("Please enter at least some time (hours or minutes).");return}const C=r+n/60,D=Math.round(C*100)/100;a.post(route("work-hours.store",{hours:D}))},v=[{label:"Tracker",value:"tracker"},{label:"Manual Time",value:"manual"},{label:"Fixed Client",value:"fixed"},{label:"Outside of Upwork",value:"outside_of_upwork"},{label:"Office Work",value:"office_work"},{label:"Test Task",value:"test_task"}],N=()=>{i(!0),o(!1)},j=()=>{o(!0),i(!1)},y=t=>{const r={...a.data,work_type:t};["tracker","manual","fixed"].includes(t)||(r.tracker="",r.trackerSearch=""),["tracker","manual","fixed","outside_of_upwork"].includes(t)||(r.client_id="",r.clientSearch=""),a.setData(r)},c=()=>["tracker","manual","fixed"].includes(a.data.work_type),u=()=>["tracker","manual","fixed","outside_of_upwork"].includes(a.data.work_type);return e.jsxs(T,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Add Work Entry"}),children:[e.jsx(_,{title:"Add Work Entry"}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:e.jsx(F,{})}),e.jsx("div",{className:"py-12 min-h-screen relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-visible shadow-2xl rounded-2xl border border-white/10",children:e.jsxs("div",{className:"p-8 text-white relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Add Work Entry"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Log your work hours and track your progress"})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-6 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Work Type"}),e.jsxs("p",{className:"text-sm text-white/70 mb-4",children:["Required fields for selected type: "," ",a.data.work_type==="tracker"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",a.data.work_type==="manual"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",a.data.work_type==="fixed"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",a.data.work_type==="outside_of_upwork"&&"Client Name, Description, Hours/Minutes, Tracking Date",a.data.work_type==="office_work"&&"Description, Hours/Minutes, Tracking Date",a.data.work_type==="test_task"&&"Description, Hours/Minutes, Tracking Date"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:v.map(t=>e.jsx("button",{type:"button",onClick:()=>y(t.value),className:`p-3 rounded-xl font-medium transition-all text-sm ${a.data.work_type===t.value?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:`grid gap-6 mb-6 ${c()&&u()?"md:grid-cols-2":(u()||c(),"md:grid-cols-1")}`,children:[c()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"tracker",className:"block text-sm font-medium text-white mb-2",children:["Profile Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:h,type:"text",placeholder:"Search or select profile...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",value:a.data.trackerSearch||(a.data.tracker?a.data.tracker:""),onChange:t=>{const r=t.target.value;a.setData("trackerSearch",r),r!==a.data.tracker&&a.setData("tracker",""),i(!0)},onFocus:N,onBlur:()=>setTimeout(()=>i(!1),200),required:c()}),w&&e.jsx("div",{ref:x,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[b.filter(t=>!a.data.trackerSearch||t.toLowerCase().includes(a.data.trackerSearch.toLowerCase())).map((t,r)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onClick:()=>{a.setData("tracker",t),a.setData("trackerSearch",t),i(!1)},children:t},r)),b.filter(t=>!a.data.trackerSearch||t.toLowerCase().includes(a.data.trackerSearch.toLowerCase())).length===0&&a.data.trackerSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No profiles found"})]})})]}),u()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"client",className:"block text-sm font-medium text-white mb-2",children:["Client Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:m,type:"text",placeholder:"Search or select client...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",value:a.data.clientSearch||(a.data.client_id?(()=>{const t=d.find(r=>r.id==a.data.client_id);return t?t.name:""})():""),onChange:t=>{const r=t.target.value;a.setData("clientSearch",r),d.find(n=>n.name===r)||a.setData("client_id",""),o(!0)},onFocus:j,onBlur:()=>setTimeout(()=>o(!1),200),required:u()}),g&&e.jsx("div",{ref:p,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[d.filter(t=>{const r=t.name;return!a.data.clientSearch||r.toLowerCase().includes(a.data.clientSearch.toLowerCase())}).map(t=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onClick:()=>{a.setData("client_id",t.id),a.setData("clientSearch",t.name),o(!1)},children:t.name},t.id)),d.filter(t=>{const r=t.name;return!a.data.clientSearch||r.toLowerCase().includes(a.data.clientSearch.toLowerCase())}).length===0&&a.data.clientSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No clients found"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-white mb-2",children:["Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",id:"date",value:a.data.date,onChange:t=>a.setData("date",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"hours",className:"block text-sm font-medium text-white mb-2",children:["Hours ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",id:"hours",min:"0",max:"24",step:"1",value:a.data.hours,onChange:t=>{let r=parseInt(t.target.value);(isNaN(r)||r<0)&&(r=0),r>24&&(r=24),a.setData("hours",r.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",r=>r.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",r=>r.preventDefault()),placeholder:"Enter hours (0-24)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minutes",className:"block text-sm font-medium text-white mb-2",children:"Minutes"}),e.jsx("input",{type:"number",id:"minutes",min:"0",max:"59",step:"1",value:a.data.minutes,onChange:t=>{let r=parseInt(t.target.value);(isNaN(r)||r<0)&&(r=0),r>59&&(r=59),a.setData("minutes",r.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",r=>r.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",r=>r.preventDefault()),placeholder:"Enter minutes (0-59)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50"})]})]}),e.jsx("div",{className:`mb-6 p-4 backdrop-blur-xl rounded-xl border ${s()?"bg-gradient-to-r from-green-500/20 to-blue-500/20 border-white/20":"bg-gradient-to-r from-red-500/20 to-orange-500/20 border-red-400/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:`w-6 h-6 ${s()?"text-blue-400":"text-red-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:`text-sm font-medium ${s()?"text-white/70":"text-red-300"}`,children:["Total Time ",!s()&&"(Required)"]}),e.jsx("div",{className:`text-2xl font-bold ${s()?"":"text-red-300"}`,children:(()=>{const t=parseInt(a.data.hours)||0,r=parseInt(a.data.minutes)||0;return t===0&&r===0?"No time entered":`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})()}),s()&&e.jsx("div",{className:"text-xs text-white/60",children:(()=>{const t=parseInt(a.data.hours)||0,r=parseInt(a.data.minutes)||0;return`${(t+r/60).toFixed(2)} decimal hours`})()}),!s()&&e.jsx("div",{className:"text-xs text-red-300",children:"Please enter at least some hours or minutes"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:["Description ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{id:"description",rows:4,value:a.data.description,onChange:t=>a.setData("description",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",placeholder:"Describe the work you did...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{href:route("work-hours.index"),className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all border border-white/20",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:a.processing,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50",children:a.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Entry"]})})]})]})]})})})})]})}export{q as default};
