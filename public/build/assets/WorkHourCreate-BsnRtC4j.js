import{G as q,R as l,j as e,S as O,x as z}from"./app-BVG6et_P.js";import{A as I}from"./AuthenticatedLayout-CKlkTecE.js";import{A as V}from"./AnimatedBackground-DogZR0Zy.js";import"./ApplicationLogo-CShaN4sh.js";import"./Avatar-BfjUHkWe.js";import"./transition-DBFTC2lo.js";function X({auth:C,trackers:x=[],clients:f=[]}){const r=q({date:new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Karachi"}),hours:"0",minutes:"0",description:"",work_type:"tracker",client_id:"",tracker:"",trackerSearch:"",clientSearch:""}),[D,d]=l.useState(!1),[y,c]=l.useState(!1),[p,i]=l.useState(""),[b,o]=l.useState(""),w=l.useRef(null),g=l.useRef(null),k=l.useRef(null),v=l.useRef(null);l.useEffect(()=>{function t(a){w.current&&k.current&&!w.current.contains(a.target)&&!k.current.contains(a.target)&&d(!1),g.current&&v.current&&!g.current.contains(a.target)&&!v.current.contains(a.target)&&c(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const n=()=>{const t=Number(r.data.hours)||0,a=Number(r.data.minutes)||0;return t>0||a>0},N=t=>{if(!h())return i(""),!0;if(!t||t.trim()==="")return i("Please select a client from the dropdown"),!1;const a=f.find(s=>s.name===t);return a?(r.data.client_id!=a.id&&r.setData("client_id",a.id),i(""),!0):(i("Please select a valid client from the dropdown"),!1)},j=t=>{if(!u())return o(""),!0;if(!t||t.trim()==="")return o("Please select a profile from the dropdown"),!1;const a=x.find(s=>s===t);return a?(r.data.tracker!==a&&r.setData("tracker",a),o(""),!0):(o("Please select a valid profile from the dropdown"),!1)},S=t=>{t.preventDefault();const a=Number(r.data.hours)||0,s=Number(r.data.minutes)||0;if(a===0&&s===0){alert("Please enter at least some time (hours or minutes).");return}const m=N(r.data.clientSearch),B=j(r.data.trackerSearch||r.data.tracker);if(!m||!B)return;const $=a+s/60,A=Math.round($*100)/100;r.post(route("work-hours.store",{hours:A}))},T=[{label:"Tracker",value:"tracker"},{label:"Manual Time",value:"manual"},{label:"Fixed Client",value:"fixed"},{label:"Outside of Upwork",value:"outside_of_upwork"},{label:"Office Work",value:"office_work"},{label:"Test Task",value:"test_task"}],_=()=>{d(!0),c(!1)},L=()=>{c(!0),d(!1)},E=t=>{const a={...r.data,work_type:t};["tracker","manual","fixed"].includes(t)||(a.tracker="",a.trackerSearch="",o("")),["tracker","manual","fixed","outside_of_upwork"].includes(t)||(a.client_id="",a.clientSearch="",i("")),r.setData(a)},u=()=>["tracker","manual","fixed"].includes(r.data.work_type),h=()=>["tracker","manual","fixed","outside_of_upwork"].includes(r.data.work_type),F=t=>{const a=t.target.value;r.setData("clientSearch",a);const s=f.find(m=>m.name===a);s?r.setData("client_id",s.id):r.setData("client_id",""),p&&i(""),c(!0)},M=t=>{const a=t.target.value;r.setData("trackerSearch",a);const s=x.find(m=>m===a);s?r.setData("tracker",s):r.setData("tracker",""),b&&o(""),d(!0)},R=t=>{r.setData("client_id",t.id),r.setData("clientSearch",t.name),i(""),c(!1),setTimeout(()=>{N(t.name)},50)},W=t=>{r.setData("tracker",t),r.setData("trackerSearch",t),o(""),d(!1),setTimeout(()=>{j(t)},50)},H=()=>{setTimeout(()=>{c(!1),h()&&N(r.data.clientSearch)},300)},P=()=>{setTimeout(()=>{d(!1),u()&&j(r.data.trackerSearch||r.data.tracker)},300)};return e.jsxs(I,{user:C.user,header:e.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Add Work Entry"}),children:[e.jsx(O,{title:"Add Work Entry"}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:e.jsx(V,{})}),e.jsx("div",{className:"py-12 min-h-screen relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-visible shadow-2xl rounded-2xl border border-white/10",children:e.jsxs("div",{className:"p-8 text-white relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Add Work Entry"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Log your work hours and track your progress"})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-6 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Work Type"}),e.jsxs("p",{className:"text-sm text-white/70 mb-4",children:["Required fields for selected type: "," ",r.data.work_type==="tracker"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="manual"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="fixed"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="outside_of_upwork"&&"Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="office_work"&&"Description, Hours/Minutes, Tracking Date",r.data.work_type==="test_task"&&"Description, Hours/Minutes, Tracking Date"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:T.map(t=>e.jsx("button",{type:"button",onClick:()=>E(t.value),className:`p-3 rounded-xl font-medium transition-all text-sm ${r.data.work_type===t.value?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:`grid gap-6 mb-6 ${u()&&h()?"md:grid-cols-2":(h()||u(),"md:grid-cols-1")}`,children:[u()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"tracker",className:"block text-sm font-medium text-white mb-2",children:["Profile Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:w,type:"text",placeholder:"Search or select profile...",className:`w-full px-4 py-3 bg-white/10 backdrop-blur-xl border rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50 ${b?"border-red-400":"border-white/20"}`,value:r.data.trackerSearch||(r.data.tracker?r.data.tracker:""),onChange:M,onFocus:_,onBlur:P,required:u()}),b&&e.jsx("div",{className:"mt-1 text-sm text-red-300",children:b}),D&&e.jsx("div",{ref:k,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[x.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).map((t,a)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onMouseDown:s=>s.preventDefault(),onClick:()=>W(t),children:t},a)),x.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).length===0&&r.data.trackerSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No profiles found. Please select from available options."})]})})]}),h()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"client",className:"block text-sm font-medium text-white mb-2",children:["Client Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:g,type:"text",placeholder:"Search or select client...",className:`w-full px-4 py-3 bg-white/10 backdrop-blur-xl border rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50 ${p?"border-red-400":"border-white/20"}`,value:r.data.clientSearch,onChange:F,onFocus:L,onBlur:H,required:h()}),p&&e.jsx("div",{className:"mt-1 text-sm text-red-300",children:p}),y&&e.jsx("div",{ref:v,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[f.filter(t=>{const a=t.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).map(t=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onMouseDown:a=>a.preventDefault(),onClick:()=>R(t),children:t.name},t.id)),f.filter(t=>{const a=t.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).length===0&&r.data.clientSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No clients found. Please select from available options."})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-white mb-2",children:["Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",id:"date",value:r.data.date,onChange:t=>r.setData("date",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"hours",className:"block text-sm font-medium text-white mb-2",children:["Hours ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",id:"hours",min:"0",max:"24",step:"1",value:r.data.hours,onChange:t=>{let a=parseInt(t.target.value);(isNaN(a)||a<0)&&(a=0),a>24&&(a=24),r.setData("hours",a.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter hours (0-24)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minutes",className:"block text-sm font-medium text-white mb-2",children:"Minutes"}),e.jsx("input",{type:"number",id:"minutes",min:"0",max:"59",step:"1",value:r.data.minutes,onChange:t=>{let a=parseInt(t.target.value);(isNaN(a)||a<0)&&(a=0),a>59&&(a=59),r.setData("minutes",a.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter minutes (0-59)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50"})]})]}),e.jsx("div",{className:`mb-6 p-4 backdrop-blur-xl rounded-xl border ${n()?"bg-gradient-to-r from-green-500/20 to-blue-500/20 border-white/20":"bg-gradient-to-r from-red-500/20 to-orange-500/20 border-red-400/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:`w-6 h-6 ${n()?"text-blue-400":"text-red-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:`text-sm font-medium ${n()?"text-white/70":"text-red-300"}`,children:["Total Time ",!n()&&"(Required)"]}),e.jsx("div",{className:`text-2xl font-bold ${n()?"":"text-red-300"}`,children:(()=>{const t=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return t===0&&a===0?"No time entered":`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})()}),n()&&e.jsx("div",{className:"text-xs text-white/60",children:(()=>{const t=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return`${(t+a/60).toFixed(2)} decimal hours`})()}),!n()&&e.jsx("div",{className:"text-xs text-red-300",children:"Please enter at least some hours or minutes"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:["Description ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{id:"description",rows:4,value:r.data.description,onChange:t=>r.setData("description",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",placeholder:"Describe the work you did...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{href:route("work-hours.index"),className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all border border-white/20",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:r.processing,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50",children:r.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Entry"]})})]})]})]})})})})]})}export{X as default};
