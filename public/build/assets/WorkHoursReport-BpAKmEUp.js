import{r as n,j as e,S as Z,x as ee,A as O}from"./app-CZCp2aUd.js";import{D as R,t as E,u as _,w as te}from"./helpers-DYhm9lPP.js";import{A as re}from"./AuthenticatedLayout-BEv8pIN4.js";import"./index-6JA3zvoH.js";import"./ApplicationLogo-BkownQm0.js";import"./transition-DZQUnqdu.js";function oe({message:c,onClose:s}){return c?e.jsxs("div",{className:"fixed top-5 right-5 z-50 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg shadow-lg flex items-center border-l-4 border-yellow-400",children:[e.jsx("span",{className:"font-medium",children:c}),e.jsx("button",{onClick:s,className:"ml-4 text-white hover:text-yellow-200 font-bold text-lg",children:"Ã—"})]}):null}const se=c=>{const s=new Date;let u,x;if(c==="today")u=x=s.toISOString().slice(0,10);else if(c==="week"){const j=s.getDate()-s.getDay();u=new Date(s.setDate(j)).toISOString().slice(0,10),x=new Date().toISOString().slice(0,10)}else c==="month"&&(u=new Date(s.getFullYear(),s.getMonth(),1).toISOString().slice(0,10),x=new Date().toISOString().slice(0,10));return{start:u,end:x}};function xe({auth:c,workHours:s,users:u=[],flash:x,filter:j="all",startDate:M="",endDate:W="",workType:L="all",userId:I="all"}){const[N,y]=n.useState(null),[P,k]=n.useState((x==null?void 0:x.success)||""),[m,z]=n.useState(j),[a,H]=n.useState(L),[h,B]=n.useState(I),[b,V]=n.useState(M?new Date(M):null),[w,Y]=n.useState(W?new Date(W):null),[v,C]=n.useState(!1),[S,D]=n.useState(""),T=n.useRef(null);n.useEffect(()=>{const t=o=>{T.current&&!T.current.contains(o.target)&&(C(!1),D(""))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const $=t=>({tracker:"Tracker",manual:"Manual Time",test_task:"Test Task",fixed:"Fixed Project",office_work:"Office Work",outside_of_upwork:"Outside of Upwork"})[t]||t,q=t=>{if(!t&&t!==0)return"";const o=Math.round(Number(t)*3600),l=Math.floor(o/3600),r=Math.floor(o%3600/60),i=o%60;return[l,r,i].map(d=>String(d).padStart(2,"0")).join(":")},G=()=>{const t=s.map(r=>{var i,d,f;return{User:r.user.name,Designation:r.user.designation||"N/A","Work Type":$(r.work_type),Tracker:r.tracker,Date:r.date,Project:((i=r.project)==null?void 0:i.name)||"No Project",Client:((f=(d=r.project)==null?void 0:d.client)==null?void 0:f.name)||"No Client",Hours:q(r.hours),Description:r.description}}),o=_.json_to_sheet(t),l=_.book_new();_.book_append_sheet(l,o,"WorkHours"),te(l,"work_hours_report.csv",{bookType:"csv"})},J=t=>{y(t)},K=()=>{N&&O.delete(route("work-hours.destroy",N),{onSuccess:()=>{k("Entry deleted successfully."),y(null)},onError:()=>{k("Failed to delete entry."),y(null)}})},Q=()=>k(""),A=t=>{B(t),C(!1),D(""),g(m,a,t)},F=u.filter(t=>t.name.toLowerCase().includes(S.toLowerCase())),X=()=>{if(h==="all")return"All Users";const t=u.find(o=>o.id==h);return t?t.name:"Select User"},g=(t,o=a,l=h)=>{z(t);const r={filter:t};if(t==="custom")b&&w&&(r.startDate=b.toISOString().slice(0,10),r.endDate=w.toISOString().slice(0,10));else if(t!=="all"){const{start:i,end:d}=se(t);r.startDate=i,r.endDate=d}o&&o!=="all"&&(r.workType=o),l&&l!=="all"&&(r.userId=l),O.get(route("work-hours.report"),r)},p=t=>{H(t),g(m,t)};return e.jsxs(re,{user:c.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Work Hours Report"}),children:[e.jsx(Z,{title:"Work Hours"}),e.jsx(oe,{message:P,onClose:Q}),N&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md border-t-4 border-yellow-400",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Confirm Delete"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Are you sure you want to delete this entry?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>y(null),className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:K,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-medium transition-all",children:"Delete"})]})]})}),e.jsx("div",{className:"py-12 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-xl border-t-4 border-gradient-to-r from-green-600 to-yellow-400",children:e.jsxs("div",{className:"p-8 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-green-700 bg-clip-text text-transparent",children:"Work Hours Report"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive analysis of work hours and productivity"})]}),e.jsxs("button",{onClick:G,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-lg font-medium transition-all shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to CSV"]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-yellow-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-3",children:"Filter by Date Range"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="all"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"All Dates"}),e.jsx("button",{onClick:()=>g("today"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="today"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"Today"}),e.jsx("button",{onClick:()=>g("week"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="week"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"This Week"}),e.jsx("button",{onClick:()=>g("month"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="month"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"This Month"}),e.jsx("button",{onClick:()=>g("custom"),className:`px-4 py-2 rounded-lg font-medium transition-all ${m==="custom"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg":"bg-white text-green-700 border border-green-300 hover:bg-green-50"}`,children:"Custom Range"})]}),m==="custom"&&e.jsxs("div",{className:"flex gap-3 items-center mt-4 p-3 bg-white rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"From:"}),e.jsx(R,{selected:b,onChange:t=>V(t),dateFormat:"yyyy-MM-dd",maxDate:w||void 0,className:"px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("span",{className:"text-green-700 font-medium",children:"To:"}),e.jsx(R,{selected:w,onChange:t=>Y(t),dateFormat:"yyyy-MM-dd",minDate:b||void 0,className:"px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsx("button",{onClick:()=>g("custom"),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-medium hover:from-green-700 hover:to-green-800 transition-all disabled:opacity-50",disabled:!b||!w,children:"Apply"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-800 mb-3",children:"Filter by Work Type"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="all"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"All Types"}),e.jsx("button",{onClick:()=>p("tracker"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="tracker"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Tracker"}),e.jsx("button",{onClick:()=>p("manual"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="manual"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Manual Time"}),e.jsx("button",{onClick:()=>p("test_task"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="test_task"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Test Task"}),e.jsx("button",{onClick:()=>p("fixed"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="fixed"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Fixed Project"}),e.jsx("button",{onClick:()=>p("office_work"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="office_work"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Office Work"}),e.jsx("button",{onClick:()=>p("outside_of_upwork"),className:`px-4 py-2 rounded-lg font-medium transition-all ${a==="outside_of_upwork"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 border border-yellow-300 hover:bg-yellow-50"}`,children:"Outside of Upwork"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-3",children:"Filter by User"}),e.jsxs("div",{className:"relative w-64",ref:T,children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white text-left flex items-center justify-between hover:bg-blue-50 transition-colors",onClick:()=>C(!v),children:[e.jsx("span",{className:"truncate",children:X()}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-blue-300 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-blue-200",children:e.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full px-3 py-2 text-sm border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:S,onChange:t=>D(t.target.value),autoFocus:!0})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:`px-4 py-2 cursor-pointer hover:bg-blue-50 transition-colors flex items-center ${h==="all"?"bg-blue-50 text-blue-600 font-medium":"text-gray-700"}`,onClick:()=>A("all"),children:[h==="all"&&e.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"All Users"]}),F.map(t=>e.jsxs("div",{className:`px-4 py-2 cursor-pointer hover:bg-blue-50 transition-colors flex items-center ${h==t.id?"bg-blue-50 text-blue-600 font-medium":"text-gray-700"}`,onClick:()=>A(t.id),children:[h==t.id&&e.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"truncate",children:t.name})]},t.id)),F.length===0&&S&&e.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"No users found"})]})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto shadow-xl ring-1 ring-black ring-opacity-5 rounded-xl",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-green-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"w-28 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Designation"}),e.jsx("th",{className:"w-28 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Work Type"}),e.jsx("th",{className:"w-24 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Tracker"}),e.jsx("th",{className:"w-28 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"w-36 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Client"}),e.jsx("th",{className:"w-20 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Hours"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"w-32 px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider sticky right-0 bg-gradient-to-r from-green-600 to-green-700",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((t,o)=>{var l,r,i,d,f,U;return e.jsxs("tr",{className:`${o%2===0?"bg-white":"bg-gray-50"} hover:bg-green-50 transition-colors`,children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate font-medium",children:t.user.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 truncate",children:t.user.designation||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:$(t.work_type)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 capitalize truncate font-medium",children:t.tracker}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 truncate font-medium",title:((l=t.project)==null?void 0:l.name)||"No Project",children:((r=t.project)==null?void 0:r.name)||"No Project"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 truncate",title:((d=(i=t.project)==null?void 0:i.client)==null?void 0:d.name)||"No Client",children:((U=(f=t.project)==null?void 0:f.client)==null?void 0:U.name)||"No Client"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-700",children:E(t.hours)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 max-w-xs truncate",title:t.description,children:t.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium sticky right-0 bg-white",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ee,{href:route("work-hours.edit",t.id),className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-xs font-medium rounded-md transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>J(t.id),className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white text-xs font-medium rounded-md transition-all",children:"Delete"})]})})]},t.id)})}),e.jsx("tfoot",{className:"bg-gradient-to-r from-gray-50 to-green-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:7,className:"px-6 py-4"}),e.jsxs("td",{className:"px-6 py-4 font-bold text-right text-green-800 text-lg",children:["Total: ",E(s.reduce((t,o)=>t+Number(o.hours||0),0).toFixed(2))]}),e.jsx("td",{className:"px-6 py-4"}),e.jsx("td",{className:"w-32 px-6 py-4 sticky right-0 bg-gradient-to-r from-gray-50 to-green-50"})]})})]})})]})})})})]})}export{xe as default};
