import{r as c,G as m,j as e,S as x,x as u}from"./app-D9EP-8ib.js";import{A as p}from"./AuthenticatedLayout-pIlT4o7i.js";import"./ApplicationLogo-4neFPB6s.js";import"./transition-Vs7zb7Iq.js";function b({auth:d}){const[o,t]=c.useState(null),a=m({name:"",email:"",password:"",role:"employee",designation:"",avatar:null}),n=s=>{s.preventDefault(),console.log("Form submission started"),console.log("Form data:",a.data),console.log("Has avatar:",!!a.data.avatar),a.post(route("users.store"),{forceFormData:!0,preserveScroll:!0,onStart:()=>{console.log("Request started")},onSuccess:r=>{console.log("Success response:",r),a.reset(),t(null)},onError:r=>{console.log("Form errors:",r)},onFinish:()=>{console.log("Request finished")}})},i=s=>{const r=s.target.files[0];if(console.log("Avatar file selected:",r),r){console.log("Setting avatar file:",r.name,r.size,r.type),a.setData("avatar",r);const l=new FileReader;l.onload=()=>{t(l.result),console.log("Avatar preview set")},l.readAsDataURL(r)}else console.log("No file selected, clearing avatar"),a.setData("avatar",null),t(null)};return e.jsxs(p,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Add User"}),children:[e.jsx(x,{title:"Add User"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-md mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add User"}),e.jsxs("form",{onSubmit:n,className:"mb-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.data.name,onChange:s=>a.setData("name",s.target.value),className:"border rounded px-2 py-1 w-full",required:!0}),a.errors.name&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Email",value:a.data.email,onChange:s=>a.setData("email",s.target.value),className:"border rounded px-2 py-1 w-full",required:!0}),a.errors.email&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.email})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",placeholder:"Password",value:a.data.password,onChange:s=>a.setData("password",s.target.value),className:"border rounded px-2 py-1 w-full",required:!0}),a.errors.password&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.password})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Designation/Job Role",value:a.data.designation,onChange:s=>a.setData("designation",s.target.value),className:"border rounded px-2 py-1 w-full"}),a.errors.designation&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.designation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Avatar"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"border rounded px-2 py-1 w-full"}),a.errors.avatar&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.avatar}),o&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:o,alt:"Avatar preview",className:"w-16 h-16 rounded-full object-cover border"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Role"}),e.jsxs("select",{value:a.data.role,onChange:s=>a.setData("role",s.target.value),className:"border rounded px-2 py-1 w-full",required:!0,children:[e.jsx("option",{value:"employee",children:"Employee"}),e.jsx("option",{value:"admin",children:"Admin"})]}),a.errors.role&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.role})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-3 py-1 rounded disabled:bg-green-300",disabled:a.processing,children:a.processing?"Creating...":"Create"}),e.jsx(u,{href:route("users.index"),className:"bg-gray-400 text-white px-3 py-1 rounded",children:"Cancel"})]})]})]})})})})]})}export{b as default};
