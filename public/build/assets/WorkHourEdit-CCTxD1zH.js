import{G as E,R as l,j as e,S as M,x as F}from"./app-CMY5baVu.js";import{A as R}from"./AuthenticatedLayout--urmt9dT.js";import{A as W}from"./AnimatedBackground-ChXVH9Wt.js";import"./ApplicationLogo-BAX2TYHh.js";import"./Avatar-BIfn-0I-.js";import"./transition-TVMOmnSk.js";function P({auth:g,workHour:s,trackers:f=[],clients:c=[]}){const w=Math.round(s.hours*60),k=Math.floor(w/60),v=w%60,r=E({date:s.date,hours:k.toString(),minutes:v.toString(),description:s.description||"",work_type:s.work_type||"tracker",client_id:s.client_id||"",tracker:s.tracker||"",trackerSearch:"",clientSearch:""}),[N,o]=l.useState(!1),[j,n]=l.useState(!1),m=l.useRef(null),x=l.useRef(null),p=l.useRef(null),b=l.useRef(null);l.useEffect(()=>{function t(a){m.current&&p.current&&!m.current.contains(a.target)&&!p.current.contains(a.target)&&o(!1),x.current&&b.current&&!x.current.contains(a.target)&&!b.current.contains(a.target)&&n(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const i=()=>{const t=Number(r.data.hours)||0,a=Number(r.data.minutes)||0;return t>0||a>0},y=t=>{t.preventDefault();const a=Number(r.data.hours)||0,d=Number(r.data.minutes)||0;if(a===0&&d===0){alert("Please enter at least some time (hours or minutes).");return}const L=a+d/60,T=Math.round(L*100)/100;r.put(route("work-hours.update",s.id),{...r.data,hours:T})},S=[{label:"Tracker",value:"tracker"},{label:"Manual Time",value:"manual"},{label:"Fixed Client",value:"fixed"},{label:"Outside of Upwork",value:"outside_of_upwork"},{label:"Office Work",value:"office_work"},{label:"Test Task",value:"test_task"}],D=()=>{o(!0),n(!1)},C=()=>{n(!0),o(!1)},_=t=>{const a={...r.data,work_type:t};["tracker","manual","fixed"].includes(t)||(a.tracker="",a.trackerSearch=""),["tracker","manual","fixed","outside_of_upwork"].includes(t)||(a.client_id="",a.clientSearch=""),r.setData(a)},u=()=>["tracker","manual","fixed"].includes(r.data.work_type),h=()=>["tracker","manual","fixed","outside_of_upwork"].includes(r.data.work_type);return l.useEffect(()=>{s.client&&r.data.clientSearch===""&&r.setData(t=>({...t,clientSearch:s.client.name})),s.tracker&&r.data.trackerSearch===""&&r.setData(t=>({...t,trackerSearch:s.tracker}))},[s]),e.jsxs(R,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Edit Work Entry"}),children:[e.jsx(M,{title:"Edit Work Entry"}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:e.jsx(W,{})}),e.jsx("div",{className:"py-12 min-h-screen relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-visible shadow-2xl rounded-2xl border border-white/10",children:e.jsxs("div",{className:"p-8 text-white relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Edit Work Entry"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Update your work hours and track your progress"})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-6 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Work Type"}),e.jsxs("p",{className:"text-sm text-white/70 mb-4",children:["Required fields for selected type: "," ",r.data.work_type==="tracker"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="manual"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="fixed"&&"Profile Name, Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="outside_of_upwork"&&"Client Name, Description, Hours/Minutes, Tracking Date",r.data.work_type==="office_work"&&"Description, Hours/Minutes, Tracking Date",r.data.work_type==="test_task"&&"Description, Hours/Minutes, Tracking Date"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:S.map(t=>e.jsx("button",{type:"button",onClick:()=>_(t.value),className:`p-3 rounded-xl font-medium transition-all text-sm ${r.data.work_type===t.value?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:`grid gap-6 mb-6 ${u()&&h()?"md:grid-cols-2":(h()||u(),"md:grid-cols-1")}`,children:[u()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"tracker",className:"block text-sm font-medium text-white mb-2",children:["Profile Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:m,type:"text",placeholder:"Search or select profile...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",value:r.data.trackerSearch||(r.data.tracker?r.data.tracker:""),onChange:t=>{const a=t.target.value;r.setData("trackerSearch",a),a!==r.data.tracker&&r.setData("tracker",""),o(!0)},onFocus:D,onBlur:()=>setTimeout(()=>o(!1),200),required:u()}),N&&e.jsx("div",{ref:p,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[f.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).map((t,a)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onClick:()=>{r.setData("tracker",t),r.setData("trackerSearch",t),o(!1)},children:t},a)),f.filter(t=>!r.data.trackerSearch||t.toLowerCase().includes(r.data.trackerSearch.toLowerCase())).length===0&&r.data.trackerSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No profiles found"})]})})]}),h()&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{htmlFor:"client",className:"block text-sm font-medium text-white mb-2",children:["Client Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{ref:x,type:"text",placeholder:"Search or select client...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",value:r.data.clientSearch||(r.data.client_id?(()=>{const t=c.find(a=>a.id==r.data.client_id);return t?t.name:""})():""),onChange:t=>{const a=t.target.value;r.setData("clientSearch",a),c.find(d=>d.name===a)||r.setData("client_id",""),n(!0)},onFocus:C,onBlur:()=>setTimeout(()=>n(!1),200),required:h()}),j&&e.jsx("div",{ref:b,className:"absolute z-50 w-full mt-1 bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl max-h-48 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-2",children:[c.filter(t=>{const a=t.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).map(t=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-white/20 rounded-lg text-white transition-all",onClick:()=>{r.setData("client_id",t.id),r.setData("clientSearch",t.name),n(!1)},children:t.name},t.id)),c.filter(t=>{const a=t.name;return!r.data.clientSearch||a.toLowerCase().includes(r.data.clientSearch.toLowerCase())}).length===0&&r.data.clientSearch&&e.jsx("div",{className:"px-3 py-2 text-white/60 text-sm",children:"No clients found"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-white mb-2",children:["Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",id:"date",value:r.data.date,onChange:t=>r.setData("date",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"hours",className:"block text-sm font-medium text-white mb-2",children:["Hours ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",id:"hours",min:"0",max:"24",step:"1",value:r.data.hours,onChange:t=>{let a=parseInt(t.target.value);(isNaN(a)||a<0)&&(a=0),a>24&&(a=24),r.setData("hours",a.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter hours (0-24)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minutes",className:"block text-sm font-medium text-white mb-2",children:"Minutes"}),e.jsx("input",{type:"number",id:"minutes",min:"0",max:"59",step:"1",value:r.data.minutes,onChange:t=>{let a=parseInt(t.target.value);(isNaN(a)||a<0)&&(a=0),a>59&&(a=59),r.setData("minutes",a.toString())},onWheel:t=>t.target.blur(),onFocus:t=>t.target.addEventListener("wheel",a=>a.preventDefault(),{passive:!1}),onBlur:t=>t.target.removeEventListener("wheel",a=>a.preventDefault()),placeholder:"Enter minutes (0-59)",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50"})]})]}),e.jsx("div",{className:`mb-6 p-4 backdrop-blur-xl rounded-xl border ${i()?"bg-gradient-to-r from-green-500/20 to-blue-500/20 border-white/20":"bg-gradient-to-r from-red-500/20 to-orange-500/20 border-red-400/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:`w-6 h-6 ${i()?"text-blue-400":"text-red-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:`text-sm font-medium ${i()?"text-white/70":"text-red-300"}`,children:["Total Time ",!i()&&"(Required)"]}),e.jsx("div",{className:`text-2xl font-bold ${i()?"":"text-red-300"}`,children:(()=>{const t=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return t===0&&a===0?"No time entered":`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})()}),i()&&e.jsx("div",{className:"text-xs text-white/60",children:(()=>{const t=parseInt(r.data.hours)||0,a=parseInt(r.data.minutes)||0;return`${(t+a/60).toFixed(2)} decimal hours`})()}),!i()&&e.jsx("div",{className:"text-xs text-red-300",children:"Please enter at least some hours or minutes"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:["Description ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{id:"description",rows:4,value:r.data.description,onChange:t=>r.setData("description",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-white/50",placeholder:"Describe the work you did...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{href:route("work-hours.index"),className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all border border-white/20",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:r.processing,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50",children:r.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Entry"]})})]})]})]})})})})]})}export{P as default};
