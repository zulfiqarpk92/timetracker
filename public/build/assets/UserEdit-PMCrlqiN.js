import{r as m,G as x,j as e,S as p,x as u}from"./app-DYLSN_Zi.js";import{A as h}from"./AuthenticatedLayout-B9VjmMm-.js";import"./ApplicationLogo-DtGkA7oM.js";import"./transition-BqLAr1NV.js";function N({auth:o,user:r}){const[d,i]=m.useState(r.avatar?`/storage/${r.avatar}`:null),a=x({name:r.name,email:r.email,password:"",role:r.role||"employee",designation:r.designation||"",avatar:null,_method:"PUT"}),n=s=>{s.preventDefault(),a.post(route("users.update",r.id),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{console.log("User updated successfully"),a.setData("password","")},onError:t=>{console.log("Validation errors:",t)}})},c=s=>{const t=s.target.files[0];if(t){a.setData("avatar",t);const l=new FileReader;l.onload=()=>{i(l.result)},l.readAsDataURL(t)}};return e.jsxs(h,{user:o.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Edit User"}),children:[e.jsx(p,{title:"Edit User"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-md mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit User"}),e.jsxs("form",{onSubmit:n,className:"mb-4 space-y-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.data.name,onChange:s=>a.setData("name",s.target.value),className:"border rounded px-2 py-1 w-full"}),a.errors.name&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Email",value:a.data.email,onChange:s=>a.setData("email",s.target.value),className:"border rounded px-2 py-1 w-full"}),a.errors.email&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.email})]}),e.jsxs("div",{children:[e.jsxs("select",{value:a.data.role,onChange:s=>a.setData("role",s.target.value),className:"border rounded px-2 py-1 w-full",children:[e.jsx("option",{value:"employee",children:"Employee"}),e.jsx("option",{value:"admin",children:"Admin"})]}),a.errors.role&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.role})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Designation/Job Role",value:a.data.designation,onChange:s=>a.setData("designation",s.target.value),className:"border rounded px-2 py-1 w-full"}),a.errors.designation&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.designation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Avatar"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"border rounded px-2 py-1 w-full"}),a.errors.avatar&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.avatar}),d&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:d,alt:"Avatar preview",className:"w-16 h-16 rounded-full object-cover border"})})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",placeholder:"New Password (leave blank to keep current)",value:a.data.password,onChange:s=>a.setData("password",s.target.value),className:"border rounded px-2 py-1 w-full"}),a.errors.password&&e.jsx("div",{className:"text-red-600 text-sm",children:a.errors.password})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-3 py-1 rounded disabled:bg-blue-300",disabled:a.processing,onClick:()=>console.log("ðŸ”˜ Save button clicked!"),children:a.processing?"Saving...":"Save"}),e.jsx(u,{href:route("users.index"),className:"bg-gray-400 text-white px-3 py-1 rounded",children:"Cancel"})]})]})]})})})})]})}export{N as default};
