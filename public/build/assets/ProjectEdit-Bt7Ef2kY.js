import{r as n,G as k,j as e,S as C,a as y,x as L}from"./app-Ddwxqofy.js";import{A as E}from"./AuthenticatedLayout-CTZTZuFJ.js";import{A as S}from"./AnimatedBackground-BBU1OLY5.js";import"./ApplicationLogo-3LeIIhXn.js";import"./Avatar-DJTmNILM.js";import"./transition-CkLA98mN.js";function A({auth:b,project:h,clients:p=[]}){const[l,a]=n.useState(!1),[w,c]=n.useState(""),[x,m]=n.useState({top:0,left:0,width:0}),u=n.useRef(null),s=n.useRef(null),r=k({name:h.name||"",client_id:h.client_id||""}),f=p.filter(t=>t.name.toLowerCase().includes(w.toLowerCase())),d=p.find(t=>t.id==r.data.client_id),j=t=>{r.setData("client_id",t.id),c(""),a(!1)},v=()=>{if(s.current){const t=s.current.getBoundingClientRect();m({top:t.bottom+window.scrollY+4,left:t.left+window.scrollX,width:t.width})}a(!l)},g=t=>{if(c(t.target.value),!l&&s.current){const o=s.current.getBoundingClientRect();m({top:o.bottom+window.scrollY+4,left:o.left+window.scrollX,width:o.width})}a(!0)};n.useEffect(()=>{const t=i=>{u.current&&!u.current.contains(i.target)&&s.current&&!s.current.contains(i.target)&&(a(!1),c(""))},o=()=>{if(l&&s.current){const i=s.current.getBoundingClientRect();m({top:i.bottom+window.scrollY+4,left:i.left+window.scrollX,width:i.width})}};return document.addEventListener("mousedown",t),window.addEventListener("scroll",o),window.addEventListener("resize",o),()=>{document.removeEventListener("mousedown",t),window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[l]);const N=t=>{t.preventDefault(),r.put(route("projects.update",h.id))};return e.jsxs(E,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-slate-100 leading-tight",children:"Edit Project"}),children:[e.jsx(C,{title:"Edit Project"}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",style:{background:"#282a2a"},children:e.jsx(S,{})}),e.jsx("div",{className:"py-12 min-h-screen relative z-10",children:e.jsx("div",{className:"max-w-2xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl overflow-hidden shadow-2xl rounded-2xl border border-white/10",children:e.jsxs("div",{className:"p-8 relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Edit Project"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Update project details and reassign client if needed"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:["Project Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Enter project name...",value:r.data.name,onChange:t=>r.setData("name",t.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all text-white placeholder-white/50",required:!0}),r.errors.name&&e.jsx("div",{className:"text-red-400 text-sm mt-2",children:r.errors.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-semibold text-white/90 mb-3",children:"Client"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:s,type:"text",placeholder:d?d.name:"Search or select client...",value:w,onChange:g,onClick:v,className:"w-full px-4 py-3 pr-10 bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all cursor-pointer text-white placeholder-white/50"}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:`w-5 h-5 text-white/60 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.errors.client_id&&e.jsx("div",{className:"text-red-400 text-sm mt-2",children:r.errors.client_id})]}),l&&y.createPortal(e.jsx("div",{ref:u,className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl shadow-2xl max-h-60 overflow-auto z-[9999]",style:{position:"absolute",top:x.top,left:x.left,width:x.width,maxHeight:"240px"},children:f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-3 hover:bg-white/20 cursor-pointer text-white/70 border-b border-white/10 transition-colors",onClick:()=>{r.setData("client_id",""),c(""),a(!1)},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear selection"]})}),f.map(t=>e.jsx("div",{className:`px-4 py-3 hover:bg-white/20 cursor-pointer transition-colors ${r.data.client_id==t.id?"bg-blue-500/30 text-white border-l-4 border-blue-400":"text-white/90"}`,onClick:()=>j(t),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium mr-3",children:t.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium",children:t.name}),r.data.client_id==t.id&&e.jsx("svg",{className:"w-4 h-4 ml-auto text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},t.id))]}):e.jsxs("div",{className:"px-4 py-3 text-white/50 text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"No clients found"]})}),document.body),d&&e.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-500/20 to-purple-500/20 backdrop-blur-xl rounded-xl border border-white/20",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white font-bold text-xl mr-4 shadow-lg",children:d.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/60 mb-1",children:"Selected Client:"}),e.jsx("p",{className:"font-semibold text-white text-lg",children:d.name})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsxs("button",{type:"submit",disabled:r.processing,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl disabled:opacity-50 backdrop-blur-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.processing?"Updating...":"Update Project"]}),e.jsxs(L,{href:route("projects.index"),className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-white/10 to-white/5 hover:from-white/20 hover:to-white/10 text-white rounded-xl font-medium transition-all shadow-lg hover:shadow-xl border border-white/20 backdrop-blur-xl",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Projects"]})]})]})]})})})})]})}export{A as default};
